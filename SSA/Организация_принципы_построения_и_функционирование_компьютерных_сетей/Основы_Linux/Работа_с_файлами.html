<!--
title: Работа с файлами
description: 
published: true
date: 2025-03-11T04:38:58.713Z
tags: 
editor: ckeditor
dateCreated: 2025-01-18T12:05:21.389Z
-->

<p><strong>Цель работы:</strong> ознакомится с стандартными командами, используемых при работе с файлами и содержимым файлов: file, touch, rm, cp, mv, head, tail, cat, tac, more, less.&nbsp;</p>
<h1><span class="text-small"><strong>Краткие теоретические и учебно-методические материалы по теме лабораторной работы:</strong></span></h1>
<h3><span class="text-small"><strong>Все имена файлов регистрозависимы:</strong></span></h3>
<p>Имена файлов в Linux (или в любой системе Unix) являются регистрозависимыми. Это означает, что имена FILE1 и file1 не являются равноценными, а путь к файлу /etc/hosts отличен от пути к файлу /etc/Hosts (последнего файла не должно существовать в файловой системе типичного компьютера, работающего под управлением Linux).</p>
<p>В данном примере продемонстрировано различие между двумя файлами, причем имя первого файла начинается с заглавной буквы W, а второго - с прописной буквы w.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_1.png"></figure>
<h3><span class="text-small"><strong>Все является файлом:</strong></span></h3>
<p>Любая директория на самом деле является файлом (с регистрозависмым именем!), хотя этот файл и имеет специальный тип. Каждый терминал (например, /dev/pts/4), любой жесткий диск или раздел на нем (например, /dev/sdb1) и любой процесс представлены где-либо в рамках файловой системы с помощью файла. После изучения данной главы у вас не останется сомнений в том, что в Linux все является файлом.</p>
<h2><span class="text-small"><strong>Утилита file:</strong></span></h2>
<p>Утилита file предназначена для определения типа файла. В Linux для определения типов файлов не используются их расширения. Для инструментов с интерфейсом командной строки абсолютно безразлично, оканчивается ли имя файла на .txt или на .pdf. Исполняя обязанности системного администратора, вы должны использовать команду file для установления типа интересующего вас файла. Ниже приведено несколько примеров использования данной утилиты при работе с типичной системой Linux.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_2.png"></figure>
<p>Утилита file использует файл со списком "магических последовательностей байт", содержащий шаблоны для распознавания типов данных. Файл со списком "магических последовательностей байт" расположен по пути /usr/share/file/magic. Используйте команду man 5 magic в случае необходимости получения дополнительной информации о нем.</p>
<p>Важно отметить, что для работы с такими специальными файлами, как файлы из директорий /dev и /proc, следует использовать команду file -s.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_3.png"></figure>
<h2><span class="text-small"><strong>Утилита touch:</strong></span></h2>
<h3><span class="text-small"><strong>1. Создание пустого файла:</strong></span></h3>
<p>Один из простых способов создания пустого файла заключается в использовании утилиты touch. (Позднее в данной книге мы рассмотрим множество других способов создания файлов.)</p>
<p>Данный пример начинается с открытия пустой директории, в которой с помощью утилиты touch создаются два файла, после чего выводится список созданных файлов.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_4.png"></figure>
<h3><span class="text-small"><strong>2. Команда touch -t</strong></span></h3>
<p>Утилита touch позволяет устанавливать набор значений свойств пустых файлов в процессе их создания. Удастся ли вам определить, какие значения свойств были установлены, ознакомившись с приведенным ниже примером? Если вы не смогли разобраться самостоятельно, обратитесь к странице руководства для утилиты touch.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_5.png"></figure>
<h2><span class="text-small"><strong>Утилита rm:</strong></span></h2>
<h3><span class="text-small"><strong>1. Удаление файлов навсегда</strong></span></h3>
<p>В том случае, если вам больше не нужен файл, следует использовать утилиту rm для его удаления. В отличие от некоторых графических пользовательских интерфейсов, интерфейс командной строки системы не предполагает использования таких хранилищ файлов, как корзина, предназначенных для последующего восстановления удаленных файлов. Если вы удалили файл с помощью утилиты rm, этот файл будет удален навсегда. Исходя из этого, следует проявлять осторожность при удалении файлов!</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_6.png"></figure>
<h3><span class="text-small"><strong>2. Команда rm -i</strong></span></h3>
<p>Для того, чтобы застраховаться от случайного удаления файла, вы можете использовать команду rm -i.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_7.png"></figure>
<h3><span class="text-small"><strong>3. Команда rm -rf</strong></span></h3>
<p>По умолчанию с помощью команды rm -r невозможно удалить непустые директории. Однако, утилита rm принимает параметры, которые позволят вам удалять любую директорию. Команда rm -rf известна благодаря тому, что она позволяет удалять все элементы файловой системы (конечно же, в том случае, если вы имеете достаточные права для выполнения этой операции). В том случае, если вы вошли в систему, воспользовавшись учетной записью пользователя root, следует проявить особую осторожность при использовании команды rm -rf (параметр f расшифровывается как force (принудительное выполнение операции), а параметр r - как recursive (рекурсивный обход директорий)), так как в случае работы с учетной записью пользователя root, упомянутые ограничения прав не будут распространяться на вас. Вы сможете в буквальном смысле удалить все файлы вашей системы по неосторожности.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_8.png"></figure>
<h2><span class="text-small"><strong>Утилита cp:</strong></span></h2>
<h3><span class="text-small"><strong>1. Копирование отдельных файлов</strong></span></h3>
<p>Для копирования файла следует использовать утилиту cp с аргументами, представленными путями к исходному и целевому файлам.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_9.png"></figure>
<h3><span class="text-small"><strong>2. Копирование файлов в другую директорию</strong></span></h3>
<p>В том случае, если в качестве пути к целевому файлу используется путь к директории, исходные файлы будут скопированы в эту целевую директорию.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_10.png"></figure>
<h3><span class="text-small"><strong>3. Команда cp -r</strong></span></h3>
<p>Для копирования директорий целиком следует использовать команду cp -r (параметр -r позволяет осуществлять рекурсивное копирование всех файлов из всех поддиректорий).</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_11.png"></figure>
<h3><span class="text-small"><strong>4. Копирование множества файлов в директорию</strong></span></h3>
<p>Вы также можете использовать утилиту cp для копирования множества файлов в одну директорию. В этом случае последний аргумент (аргумент, указывающий на цель) должен быть представлен путем к директории.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_12.png"></figure>
<h3><span class="text-small"><strong>5. Команда cp -i</strong></span></h3>
<p>Для предотвращения перезаписи существующих файлов в ходе использования утилиты cp следует использовать параметр -i (для активации интерактивного режима копирования).</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_13.png"></figure>
<h2><span class="text-small"><strong>Утилита mv:</strong></span></h2>
<h3><span class="text-small"><strong>1. Переименование файлов с помощью утилиты mv</strong></span></h3>
<p>Утилита mv используется для переименования файлов или для перемещения файлов в другие директории.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_14.png"></figure>
<p>В том случае, если вам необходимо переименовать один файл, утилита mv является предпочтительным инструментом.</p>
<h3><span class="text-small"><strong>2. Переименование директорий с помощью утилиты mv</strong></span></h3>
<p>Эта же утилита mv может быть использована и для переименования директорий.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_15.png"></figure>
<h3><span class="text-small"><strong>3. Команда mv -i</strong></span></h3>
<p>Утилита mv поддерживает параметр -i по аналогии с утилитами cp и rm.</p>
<p>В примере ниже показано, как при использовании команды mv -i запрашивается подтверждение перезаписи существующего файла.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_16.png"></figure>
<p><strong>Примечание:</strong></p>
<p>При необходимости копирования, удаления и т.д. всех данных (файлов, директорий) из определенный директории можно воспользоваться <strong>*</strong>.</p>
<p><strong>Пример:</strong></p>
<pre><code class="language-plaintext">$ cp -r /home/* /home/paul/</code></pre>
<h2><span class="text-small"><strong>Утилита head:</strong></span></h2>
<p>Вы можете использовать утилиту head для вывода первых десяти строк файла.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/head.png"></figure>
<p>Утилита head также может использоваться для вывода первых n строк файла.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_17.png"></figure>
<p>Кроме того, утилита head может использоваться для вывода первых n байт файла.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_18.png"></figure>
<h2><span class="text-small"><strong>Утилита tail:</strong></span></h2>
<p>По аналогии с утилитой head, утилита tail может использоваться для вывода последних десяти строк файла.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_19.png"></figure>
<p>Вы можете передать утилите tail число, соответствующее количеству строк, которое вы хотите увидеть в выводе.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_20.png"></figure>
<p>Утилита tail поддерживает и другие полезные параметры, причем некоторые из них мы будем использовать в рамках данного курса.</p>
<h2><span class="text-small"><strong>Утилита cat:</strong></span></h2>
<p>Утилита cat является одним из наиболее универсальных инструментов операционной системы. Все, что она делает - это копирует данные из стандартного потока ввода в стандартный поток вывода. Данная утилита в комбинации с командной оболочкой позволяет реализовать мощные и разнообразные механизмы обработки данных. Воспользуемся примерами для иллюстрации этих механизмов. Первый пример является достаточно простым и вы можете использовать рассмотренную в нем команду в повседневной работе для вывода содержимого файла на экран. В том случае, если данные из файла не умещаются на экране, будет осуществлена прокрутка до конца файла.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/cat.png"></figure>
<h3><span class="text-small"><strong>1. Объединение файлов:</strong></span></h3>
<p>Имя утилиты cat является сокращенной формой слова concatenate (объединить). Одним из наиболее простых сценариев использования данной утилиты является объединение файлов в рамках файла большего объема (или полного файла).</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_21.png"></figure>
<h3><span class="text-small"><strong>2. Создание файлов:</strong></span></h3>
<p>Также вы можете использовать утилиту cat для создания текстовых файлов. Введите команду cat &gt; winter.txt, приведенную в примере ниже. После этого введите одну строку или несколько строк текста, завершая ввод каждой из строк нажатием клавиши Enter. После ввода последней строки текста нажмите и удерживайте клавишу Ctrl и одновременно с этим кратковременно нажмите клавишу d.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_22.png"></figure>
<p>Комбинация клавиш Ctrl+d позволяет передать исполняющемуся процессу символ окончания файла (End of File - EOF), что приведет к завершению исполнения процесса cat.</p>
<h3><span class="text-small"><strong>3. Специальный маркер окончания файла:</strong></span></h3>
<p>Вы можете установить специальный маркер окончания файла для утилиты cat с помощью параметра &lt;&lt; таким образом, как показано в примере. Данная конструкция называется локальной директивой (here directive) и позволяет завершать работу процесса cat.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_23.png"></figure>
<h3><span class="text-small"><strong>4. Копирование файлов:</strong></span></h3>
<p>При рассмотрении третьего примера вы можете обнаружить, что утилита cat также может использоваться для копирования файлов. Подробные пояснения относительно происходящих в этом случае процессов будут даны в главе, посвященной командной оболочке bash.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_24.png"></figure>
<h2><span class="text-small"><strong>Утилита tac:</strong></span></h2>
<p>Предназначение утилиты tac (в отличие от утилиты cat) может быть проиллюстрировано с помощью единственного примера.</p>
<figure class="image"><img src="/ssa/baza_linux/practica/file_25.png"></figure>
<h2><span class="text-small"><strong>Утилита more:</strong></span></h2>
<p>Утилита more может оказаться полезной в случае возникновения необходимости вывода содержимого файлов, которое не умещается на экране. Утилита more позволяет ознакомится с содержимым файла, разделенным на страницы. После открытия файла с использованием данной утилиты следует использовать клавишу "пробел" для перехода к следующей странице или клавишу q для выхода из режима просмотра содержимого файла. Некоторые пользователи предпочитают использовать утилиту less вместо утилиты more.</p>
<h1><span class="text-small"><strong>Задания для практической работы:</strong></span></h1>
<ol>
  <li>Создайте пустые файлы file1 и file2 в домашней директории.</li>
  <li>Создайте директорию ~/default, и скопируйте в нее все файлы из /etc/default.</li>
  <li>Создайте директорию ~/newdir, и переместите в нее файлы rsyslog и syslog-ng из ~/default.</li>
  <li>Удалите директорию /var/cache/apt со всем поддиректориями и файлами.</li>
  <li>С помощью утилиты cat создайте файл ~/resolv.conf из файлов head base google1 google2, расположенных в каталоге /etc/resolvconf/resolv.conf.d. Внимание! Сохраняйте последовательность файлов в команде cat, как указано в этом задании.</li>
</ol>
<h1><span class="text-small"><strong>Контрольные вопросы:</strong></span></h1>
<ol>
  <li>Какая утилита предназначена для определения типа файлов?</li>
  <li>С помощью какой утилиты можно создать пустой файл?</li>
  <li>Утилита rm удаляет файлы</li>
  <li>Для рекурсивного копирования файлов команде cp необходимо указать ключ</li>
  <li>Напишите строку для полного (со всеми файлами и поддиректориями) удаления директории /home/box</li>
  <li>Какая утилита позволяет вывести несколько строк с начала файла?</li>
  <li>Какая утилита позволяет вывести несколько строк с конца файла?</li>
  <li>Какие утилиты позволяют просматривать длинные файлы, разделив их на страницы?</li>
  <li>Напишите команду для вывода двух последних строк из файла /etc/fstab</li>
</ol>
